<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"www.victorchu.info","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"style":null,"show_result":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"waline","storage":false,"lazyload":false,"nav":null,"activeClass":"waline"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"X9UOD4FSUP","apiKey":"fa32db1f02073025c69da8ebad0a6aa6","indexName":"hexo-next-blog","hits":{"per_page":10}}}</script><script src="/js/config.js"></script><meta name="description" content="blog about programming."><meta property="og:type" content="website"><meta property="og:title" content="代码之旅"><meta property="og:url" content="https://www.victorchu.info/page/19/index.html"><meta property="og:site_name" content="代码之旅"><meta property="og:description" content="blog about programming."><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Victor Chu"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.victorchu.info/page/19/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/19/index.html","title":""}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>代码之旅</title><script src="/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?277fc29fa80de77c97f4f62b69e94233"></script><link rel="dns-prefetch" href="walineui.victorchu.info"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="代码之旅" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">代码之旅</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">I love Coding !</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">106</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">80</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">196</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container"><div class="algolia-stats"><hr></div><div class="algolia-hits"></div><div class="algolia-pagination"></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Victor Chu" src="/images/victor-blog-head.webp"><p class="site-author-name" itemprop="name">Victor Chu</p><div class="site-description" itemprop="description">blog about programming.</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">196</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">80</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">106</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/chutian0610" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;chutian0610" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:victorchu0610@outlook.com" title="E-Mail → mailto:victorchu0610@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/victorchu" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;victorchu" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i>Zhihu</a> </span><span class="links-of-author-item"><a href="/images/Wechat.webp" title="WeChat → &#x2F;images&#x2F;Wechat.webp" rel="noopener me"><i class="fa-brands fa-weixin fa-fw"></i>WeChat</a></span></div></div></div><div class="back-to-top animated" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> 链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.tpfuture.top/" title="https:&#x2F;&#x2F;www.tpfuture.top&#x2F;" rel="noopener" target="_blank">一水轩</a></li></ul></div></div></aside></div><div class="main-inner index posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/5c947520/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/5c947520/" class="post-title-link" itemprop="url">linux命令awk</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-18 09:50:42" itemprop="dateCreated datePublished" datetime="2016-12-18T09:50:42+08:00">2016-12-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-11-23 14:47:39" itemprop="dateModified" datetime="2023-11-23T14:47:39+08:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/5c947520/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/5c947520/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/5c947520/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>11k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>18 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>linux命令awk</h1><p>Awk的基本功能就是查找具某种模式的文本行（或者其他单位的文本）。当匹配某个模式后，awk会对该行执行指定的动作。Awk然后继续输入行，直到文件输入处理完毕。</p><p>awk 命令的大致结构如下:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;program&#x27;</span> inputfile1 inputfile2 inputfile3 ...</span><br><span class="line"><span class="comment"># 也可以运行awk程序，不带输入文件</span></span><br><span class="line">awk <span class="string">&#x27;program&#x27;</span>  </span><br><span class="line"><span class="comment">## awk会使程序导向到标准输入,直到你输入Ctrl-d 来表示‘end-of-file’</span></span><br><span class="line"><span class="comment">## 在非POSIX 操作系统中，‘end-of-file’有可能不同，如在OS/2 中则是Ctrl-z</span></span><br></pre></td></tr></table></figure><blockquote><p>注意，awk是标准的管道, 如果 ‘program’ 中没有和输入有关的逻辑，awk是不会读取输入的.例如:</p><blockquote><p><code>awk 'BEGIN &#123; print &quot;Hello World!&quot; &#125;'</code> 不会读取任何输入。<br><code>awk '&#123;print&#125;'</code> 会持续读取输入，直到 Ctrl-d</p></blockquote></blockquote><p>如果awk 程序的程序很长，那么可以使用文件中的代码来执行awk</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -f program-file inputfile1 inputfile2 inputfile3 ...</span><br></pre></td></tr></table></figure><p>举个例子：</p><ol><li>创建文件hello</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/awk -f</span></span><br><span class="line">BEGIN &#123; <span class="built_in">print</span> <span class="string">&quot;Hello World!&quot;</span> &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>使用awk文件</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ awk -f hello</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure><p>也可以直接对脚本赋权 <code>chmod +x hello</code>，然后就可以直接执行 hello。</p><blockquote><p>awk不仅是shell命令，还是一门脚本语言！</p></blockquote><h2 id="awk基础">awk基础</h2><p>awk常用于解析结构化的数据，特别是CSV like结构。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Beth 4.00 0</span><br><span class="line">Dan 3.75 0</span><br><span class="line">Kathy 4.00 10</span><br><span class="line">Mark 5.00 20</span><br><span class="line">Mary 5.50 22</span><br><span class="line">Susie 4.25 18</span><br></pre></td></tr></table></figure><p>awk 的数据只有两种类型: 数值与由字符组成的字符串。awk 从输入中每次读取一行, 将行分解为一个个的字段 (默认将字段看作是非空白字符组成的序列)。当前输入行的第一个字段叫作 <code>$1</code>, 第二个是 <code>$2</code>, 依次类推. 一整行记为 <code>$0</code>. 每行的字段数有可能不一样。</p><p>awk默认列直接的间隔是空格(多个空格或制表符认为是一个间隔)。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;1      2 3&quot;</span> |awk <span class="string">&#x27;&#123;print $1,$2,$3&#125;&#x27;</span></span><br><span class="line">1 2 3</span><br></pre></td></tr></table></figure><p>对于非空格隔开的场景，awk也支持通过<code>-F</code>自定义间隔字符。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;1,2,3&quot;</span> |awk -F <span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $1,$2,$3&#125;&#x27;</span></span><br><span class="line">1 2 3</span><br><span class="line"><span class="comment"># 注意多个间隔字符的区别</span></span><br><span class="line">$ <span class="built_in">printf</span> <span class="string">&quot;1,,2,3&quot;</span> |awk -F <span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;&#123;print $1,$2,$3&#125;&#x27;</span></span><br><span class="line">1  2</span><br></pre></td></tr></table></figure><h3 id="数组">数组</h3><p>Awk 提供了一维数组, 用于存放字符串与数值. 数组与数组元素都不需要事先声明, 也不需要说明数组中有多少个元素. 就像变量一样, 当被提及时, 数组元素就会被创建, 数组元素的默认初始值为 0 或空字符串 “”.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将当前输入行赋值给数组 x 的元素 NR.</span></span><br><span class="line"><span class="comment"># NR是内建变量</span></span><br><span class="line">x[NR] = <span class="variable">$0</span></span><br></pre></td></tr></table></figure><p>Awk 的数组与大多数其他语言最大的不同点是, 数组元素的下标是字符串. 这个特性使得 awk 具有了一种能力, 关联数组 (associative arrays)「类似Map的实现」。</p><p>为了判断某个特定的下标是否出现在数组中, 可以这样写:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subscript <span class="keyword">in</span> A</span><br></pre></td></tr></table></figure><p>如果 <code>A[subscript]</code> 已经存在, 那么这个表达式 的值为 1, 否则为 0. 所以, 为了测试 Africa 是否是数组 pop 的一个下标, 可以这样写:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&quot;Africa&quot;</span> <span class="keyword">in</span> pop)</span><br></pre></td></tr></table></figure><p>一个数组元素可以通过 <code>delete array[subscript]</code>删除.</p><p>Awk 不直接支持多维数组, 但是它利用一维数组来近似模拟多维数组. 虽然你可以写出像 i, j 或 s, p, q, r 这样的多维数组下标, 实际上 awk 会将它们都拼接起来 (下标之间用一个分隔符分开), 合成一个单独的下标. 例如:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (i = 1; i &lt;= 10; i++)</span><br><span class="line">  for (j = 1; j &lt;= 10; j++)</span><br><span class="line">    arr[i, j] = 0</span><br></pre></td></tr></table></figure><p>创建了一个具有 100 个元素的数组, 下标具有形式 1,1 ，1,2 等等. 在 awk 内部, 下标其实是以字符串的形式存储的, 字符串具有形式 1 SUBSEP 1, 1 SUBSEP 2 等等. 内建变量 SUBSEP 用于分隔下标的各个构成成分, 它的默认值是 “\034”, 而不是逗号, 之所以使用 “\034” 是因为这个字符不太可能出现在通常的文本中.</p><p>为了测试一个多维下标是否是某个数组的成员, 我们需要将下标用括号括起来, 例如</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if ((i,j) in arr) ...</span><br></pre></td></tr></table></figure><p>为了遍历一个这样的数组, 可以这样写:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (k <span class="keyword">in</span> arr) ...</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果需要单独地访问下标的某个成分, 可以使用 split 函数</span></span><br><span class="line">split(k, x, SUBSEP)</span><br></pre></td></tr></table></figure><blockquote><p>数组的元素不能再是数组.</p></blockquote><h3 id="内建变量">内建变量</h3><table><thead><tr><th style="text-align:left">变量</th><th style="text-align:left">意义</th><th style="text-align:left">默认值</th></tr></thead><tbody><tr><td style="text-align:left">ARGC</td><td style="text-align:left">命令行参数的个数</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left">ARGV</td><td style="text-align:left">命令行参数数组</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left">FILENAME</td><td style="text-align:left">当前输入文件名</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left">FNR</td><td style="text-align:left">当前输入文件的记录个数</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left">FS</td><td style="text-align:left">控制着输入行的字段分割符</td><td style="text-align:left">&quot; &quot;</td></tr><tr><td style="text-align:left">NF</td><td style="text-align:left">当前记录的字段个数</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left">NR</td><td style="text-align:left">到目前为止读的记录数量</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left">OFMT</td><td style="text-align:left">数值的输出格式</td><td style="text-align:left">“%.6g”</td></tr><tr><td style="text-align:left">OFS</td><td style="text-align:left">输出字段分割符</td><td style="text-align:left">&quot; &quot;</td></tr><tr><td style="text-align:left">ORS</td><td style="text-align:left">输出的记录的分割符</td><td style="text-align:left">“\n”</td></tr><tr><td style="text-align:left">RLENGTH</td><td style="text-align:left">被函数 match 匹配的字符串的长度</td><td style="text-align:left">-</td></tr><tr><td style="text-align:left">RS</td><td style="text-align:left">控制着输入行的记录分割符</td><td style="text-align:left">“\n”</td></tr><tr><td style="text-align:left">RSTART</td><td style="text-align:left">被函数 match 匹配的字符串的开始</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">SUBSEP</td><td style="text-align:left">下标分割符</td><td style="text-align:left">&quot;\034</td></tr></tbody></table><h2 id="awk语言">awk语言</h2><p>上面介绍了awk实际上是一门脚本语言，本节将深入介绍awk脚本语言。</p><p>awk program的标准结构是由多个模式–动作语句构成的序列。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pattern &#123; action &#125;; pattern &#123; action &#125; # comment</span><br><span class="line">pattern &#123; action &#125; # comment</span><br></pre></td></tr></table></figure><ul><li>模式–动作语句, 以及动作内的语句通常用换行符分隔, 但是若干条语句也可以出现在同一行, 只要它们之间用分号分开即可. 分号可以放在任何语句的末尾。</li><li>动作的左花括号必须与它的模式在同一行; 而剩下的部分, 包括右花括号, 则可以出现在下<br>面几行.</li><li>空行会被忽略; 它们可以插入在语句之前或之后, 用于提高程序的可读性. 空格与制表符可<br>以出现在运算符与操作数的周围, 同样也是为了提高可读性.</li><li>注释可以出现在任意一行的末尾. 一个注释以井号 (#) 开始, 以换行符结束</li></ul><p>在某些语句中, 模式可以不存在; 还有些语句, 动作及其包围它的花括号也可以不存在. 如果程序经过 awk 检查后没有发现语法错误, 它就会每次读取一个输入行, 对读取到的每一行, 按顺序检查每一个模式。 对每一个与当前行匹配的模式, 对应的动作就会执行。 缺失的模式匹配每一个输入行, 因此每一个不带有模式的动作对每一个输入行都会执行。只含有模式而没有动作的语句, 则会打印每一个匹配模式的输入行。</p><figure><img data-src="/posts/5c947520/awk.webp" alt></figure><blockquote><p>begin和end是特殊的模式，具体见下一小节模式</p></blockquote><h3 id="模式">模式</h3><p>模式控制着动作的执行: 当模式匹配时, 相应的动作便会执行. 这一小节描述模式的 6 种类<br>型, 以及匹配它们的条件。</p><ul><li><code>BEGIN&#123; statements&#125;</code>：在输入被读取之前, statements 执行一次</li><li><code>END&#123; statements&#125;</code>：当所有输入被读取完毕之后, statements 执行一次</li><li><code>expression&#123; statements&#125;</code>：每碰到一个使 expression 为真的输入行, statements 就执行. expression 为真指的是其值非零或非空.</li><li><code>/regular expression/ &#123; statements&#125;</code>： 碰到被 regular expression 匹配的一个输入行时, statements 就执行。测试一个字符串是否包含一段可以被正则表达式匹配的子字符串。</li><li><code>compound pattern &#123; statements&#125;</code>：将表达式用 &amp;&amp;(AND), ||(OR), !(NOT), 以及括号组合成一个复合模式; 当 compound pattern 为真时, statements 执行.</li><li>pattern1, pattern2 { statements}: 范围模式匹配多个输入行, 这些输入行从匹配pattern1 的行开始, 到匹配 pattern2的行结束 (包括这两行), 对这其中的每一行执行 statements.</li></ul><blockquote><p>BEGIN 与 END 不与其他模式组合,且 BEGIN 与 END是唯一两个不能省略动作的模式.</p></blockquote><blockquote><p>一个范围模式不能是其他模式的一部分. pattern1 与 pattern2 可以匹配相同行。</p></blockquote><h4 id="begin-end-模式">begin &amp; end 模式</h4><p>BEGIN 与 END 这两个模式不匹配任何输入行. 实际情况是, 当 awk 从输入读取数据之前,BEGIN 的语句开始执行; 当所有输入数据被读取完毕, END 的语句开始执行. 于是, BEGIN 与<br>END 分别提供了一种控制初始化与扫尾的方式.</p><p>BEGIN 与 END 不能与其他模式作组合. 如果有多个 BEGIN, 与其关联的动作会按照它们在程序中出现的顺序执行, 这种行为对多个 END 同样适用. 我们通常将 BEGIN 放在程序开头, 将 END 放在程序末尾。</p><p>BEGIN 的一个常见用途是更改输入行被分割为字段的默认方式. 分割字符由一个内建变量FS 控制. 默认情况下字段由空格或 (和) 制表符分割, 此时 FS 的值被设置为一个空格符. 将 FS 设置成一个非空格字符, 就会使该字符成为字段分割符.</p><h4 id="表达式模式">表达式模式</h4><blockquote><p>任意一个表达式都可以用作任意一个运算符的操作数. 如果一个表达式拥有一个数值形式的值, 而运算符要求一个字符串值, 那么该数值会自动转换成字符串, 类似地, 当运算符要求 一个数值时, 字符串被自动转换成数字。</p></blockquote><p>任意一个表达式都可以当作模式来使用. 如果一个作为模式使用的表达式, 对当前输入行的<br>求值结果非零或不为空, 那么该模式就匹配该行. 典型的表达式模式是那些涉及到数值或字符串<br>比较的表达式，例如:</p><table><thead><tr><th style="text-align:left">运算符</th><th style="text-align:left">意义</th></tr></thead><tbody><tr><td style="text-align:left">&lt;</td><td style="text-align:left">小于</td></tr><tr><td style="text-align:left">&lt;=</td><td style="text-align:left">小于或等于</td></tr><tr><td style="text-align:left">==</td><td style="text-align:left">等于</td></tr><tr><td style="text-align:left">!=</td><td style="text-align:left">不等于</td></tr><tr><td style="text-align:left">&gt;=</td><td style="text-align:left">大于或等于</td></tr><tr><td style="text-align:left">&gt;</td><td style="text-align:left">大于</td></tr><tr><td style="text-align:left">~</td><td style="text-align:left">匹配</td></tr><tr><td style="text-align:left">!~</td><td style="text-align:left">不匹配</td></tr></tbody></table><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Print line number 12 of file.txt</span></span><br><span class="line">awk <span class="string">&#x27;NR==12&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print only lines that do not match regex in file.txt</span></span><br><span class="line">awk <span class="string">&#x27;!/regex/&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print any line where field 2 is equal to &quot;foo&quot; in file.txt</span></span><br><span class="line">awk <span class="string">&#x27;$2 == &quot;foo&quot;&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print lines where field 2 is NOT equal to &quot;foo&quot; in file.txt</span></span><br><span class="line">awk <span class="string">&#x27;$2 != &quot;foo&quot;&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print line if field 1 matches regex in file.txt</span></span><br><span class="line">awk <span class="string">&#x27;$1 ~ /regex/&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print line if field 1 does NOT match regex in file.txt</span></span><br><span class="line">awk <span class="string">&#x27;$1 !~ /regex/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure><blockquote><p>数字类型的比较是按照数值大小进行比较，而字符串的比较是以字符为单位逐个相比, 字符间的先后顺序依赖于机器的字符集 (大多数情况下是 ASCII 字符集).一个字符串 “小于” 另一个, 指的是它比另一个字符串更早出现, 例如 “Canada” &lt; “China”.</p><blockquote><p>注意，只有当两个字段都是数值时, 比较才会以数值的形式进行。</p></blockquote></blockquote><h4 id="复合模式">复合模式</h4><p>复合模式是一个组合了其他模式的表达式, 通过括号, 逻辑运算符 ||(OR), &amp;&amp;(AND),<br>!(NOT) 进行组合. 如果表达式的值为真, 那么复合模式就匹配当前输入行。例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$4</span> == <span class="string">&quot;Asia&quot;</span> &amp;&amp; <span class="variable">$3</span> &gt; 500</span><br><span class="line"><span class="variable">$4</span> == <span class="string">&quot;Asia&quot;</span> || <span class="variable">$4</span> == <span class="string">&quot;Europe&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>运算符 || 优先级最低, 再往高是 &amp;&amp;, 最高的是 !. &amp;&amp; 与 || 从左至右计算操作数的值, 一旦已经知道整个表达式的值, 计算便停止（短路）.</p></blockquote><h4 id="范围模式">范围模式</h4><p>一个范围模式由两个被逗号分开的模式组成。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pat1,pat2</span><br></pre></td></tr></table></figure><p>范围模式匹配多个输入行, 这些输入行从匹配 pat1的行开始, 到匹配 pat2 的行结束, 包括这两行; pat2 可以与 pat1 匹配到同一行, 这时候模式的范围大小就退化到了一行.</p><p>一旦范围的第一个模式匹配到了某个输入行, 那么整个范围模式的匹配就开始了; 如果范围模式的第二个模式一直都没有匹配到某个输入行, 那么范围模式会一直匹配到输入结束.</p><blockquote><p>一个范围模式不能是其他模式的一部分.</p></blockquote><h3 id="动作">动作</h3><p>在一个 模式–动作 语句中, 模式决定动作什么时候执行. 有时候动作会非常简单: 一条单独的打印语句或赋值语句. 在有些时候, 动作有可能是多条语句, 语句之间用换行符或分号分开。</p><p>动作中的语句可以包括:</p><ul><li>expression, 包括常量, 变量, 赋值, 函数调用等等.</li><li>print expression-list</li><li>printf(format, expression-list)</li><li>if (expression) statements</li><li>if (expression) statements else statements</li><li>while (expression) statements</li><li>for (expression; expression; expression) statements</li><li>for (expression in array) statements</li><li>do statements while (expression)</li><li>break</li><li>continue</li></ul><h4 id="值">值</h4><ul><li>常量 (Constants). Awk 中只有两种类型的常量: 字符串与数值.<ul><li>将一个字符序列用一对双引号包围起来就创建了一个字符串常量, 正如 “Asia”, 或 “hello, world” 或 “”.</li><li>一个数值常量可以是一个整数, 就像 1127, 或十进制小数, 3.14, 或者是用科学计数法表示的数: 0.707E-1. 同一个数的不同表示法都拥有相同的值: 1e6, 1.00E6, 10e5, 0.1e7 与1000000 都表示同一个数. 所有的数都用浮点格式存储, 浮点数的精度依赖于机器。</li></ul></li><li>变量 (Variables). 表达式可以包含若干种类型的变量: 用户定义的, 内建的, 或字段. 用户定义的变量名字由数字, 字母与下划线构成, 但是名字不能以数字开始. 所有内建变量的名字都只由大写字母组成.<ul><li>每一个变量都有一个值, 这个值可以是字符串或数值, 或两者都是. 一个未初始化的变量的值是 “” (空字符串) 与 0</li><li>因为变量的类型不需要事先声明, 所以 awk 需要根据上下文环境推断出变量的类型. 当需要时, awk 可以把字符串转化为数值, 或反之.</li><li>内建变量 (Built-In Variables)在上面的下节中有列出。</li><li>字段变量 (Field Variables)就是<code>$1</code>,<code>$2</code>这种方式引用的字段。字段变量也可以被赋值修改。值得注意的是: 如果 <code>$0</code>发生了 改变 (通过赋值或替换), 那么 <code>$1</code>, <code>$2</code> 等等, 以及 NF 就会被重新计算; 同样的道理, 当 <code>$1</code>,<code>$2</code> 等被修改了, <code>$0</code> 就会被重新构造。字段也可以通过表达式指定. 例如, $(NF-1) 表示当前输入行的倒数第 2 个字段. 表达式两边的括号不能省略: $NF-1 表示最后一个字段减 1 后的值.</li></ul></li></ul><p>有两种惯用语法可以将表达式从一种类型转换成另一种类型:</p><ul><li>number “” 将空字符串拼接到 number 可以将它强制转换成字符串</li><li>string + 0 给字符串加上零可以把它强制转换成数值</li></ul><h4 id="操作符">操作符</h4><table><thead><tr><th style="text-align:left">操作</th><th style="text-align:left">运算符</th><th style="text-align:left">例子</th><th style="text-align:left">例子的含义</th></tr></thead><tbody><tr><td style="text-align:left">赋值</td><td style="text-align:left">= += -= *= /= %= ^=</td><td style="text-align:left">x *= 2</td><td style="text-align:left">x = x * 2</td></tr><tr><td style="text-align:left">条件表达式</td><td style="text-align:left">?:</td><td style="text-align:left">x ? y : z</td><td style="text-align:left">若 x 为真, 则 y, 否则 z</td></tr><tr><td style="text-align:left">逻辑或</td><td style="text-align:left">||</td><td style="text-align:left">x || y</td><td style="text-align:left">若 x 或 y 为真, 则为 1, 否则为 0</td></tr><tr><td style="text-align:left">逻辑与</td><td style="text-align:left">&amp;&amp;</td><td style="text-align:left">x &amp;&amp; y</td><td style="text-align:left">若 x 与 y 都为真, 则为 1, 否则为 0</td></tr><tr><td style="text-align:left">数组成员</td><td style="text-align:left">in</td><td style="text-align:left">i in a</td><td style="text-align:left">如果 a[i] 存在, 则为 1, 否则为 0</td></tr><tr><td style="text-align:left">匹配</td><td style="text-align:left">~ !~</td><td style="text-align:left">$1 ~ /x/</td><td style="text-align:left">如果第一个字段包含 x, 则为 1, 否则为 0</td></tr><tr><td style="text-align:left">关系运算</td><td style="text-align:left">&lt; &lt;= == != &gt;= &gt;</td><td style="text-align:left">x == y</td><td style="text-align:left">如果 x 等于 y, 则为 1, 否则为 0</td></tr><tr><td style="text-align:left">拼接</td><td style="text-align:left"></td><td style="text-align:left">“a” “bc” “abc”;</td><td style="text-align:left">不存在显式的拼接运算符</td></tr><tr><td style="text-align:left">减法, 加法</td><td style="text-align:left">+ -</td><td style="text-align:left">x + y</td><td style="text-align:left">x 与 y 的和</td></tr><tr><td style="text-align:left">乘法, 除法, 取模</td><td style="text-align:left">* / %</td><td style="text-align:left">x % y x 除以 y 的余数</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">单目加, 单目减</td><td style="text-align:left">+ -</td><td style="text-align:left">-x</td><td style="text-align:left">x 的相反数</td></tr><tr><td style="text-align:left">逻辑非</td><td style="text-align:left">!</td><td style="text-align:left">!$1</td><td style="text-align:left">若 $1 为空或为 0, 则为 1, 否则为 0</td></tr><tr><td style="text-align:left">指数运算</td><td style="text-align:left">^</td><td style="text-align:left">x ^ y</td><td style="text-align:left">x的y次方</td></tr><tr><td style="text-align:left">自增, 自减</td><td style="text-align:left">++ –</td><td style="text-align:left">++x, x++</td><td style="text-align:left">为 x 加 1</td></tr><tr><td style="text-align:left">字段</td><td style="text-align:left">$</td><td style="text-align:left">$i+1</td><td style="text-align:left">1 加上第 i 个字段的值</td></tr><tr><td style="text-align:left">组合</td><td style="text-align:left">( )</td><td style="text-align:left">($i+1)++</td><td style="text-align:left">给第 i+1 个字段的值加 1</td></tr></tbody></table><p>运算符按照优先级的升序排列. 优先级高的运算符优先求值; 举例来说, 乘法运算在加法运算之前求值. 所有的运算符都是左结合的, 除了赋值运算符, 条件运算符, 指数运算 — 它们都是右结合的. 左结合性意味着相同优先级的运算符按照从左到右的顺序进行运算;</p><p>因为没有显式的拼接运算符, 所以比较明智的做法是, 在拼接运算中, 将涉及到其他运算的表达式用括号包围起来.</p><h4 id="内建函数">内建函数</h4><table><thead><tr><th style="text-align:left">类型</th><th style="text-align:left">函数</th><th style="text-align:left">返回值</th></tr></thead><tbody><tr><td style="text-align:left">算术</td><td style="text-align:left">atan2(y,x)</td><td style="text-align:left">y/x 的反正切值, 定义域在 −π 到 π 之间</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">cos(x)</td><td style="text-align:left">x 的余弦值, x 以弧度为单位</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">exp(x)</td><td style="text-align:left">x 的指数函数, e^x</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">int(x)</td><td style="text-align:left">x 的整数部分; 当 x 大于 0 时, 向 0 取整</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">log(x)</td><td style="text-align:left">x 的自然对数 (以 e 为底)</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">rand()</td><td style="text-align:left">返回一个随机数 r, 0 ≤ r &lt; 1</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">sin(x)</td><td style="text-align:left">x 的正弦值, x 以弧度为单位.</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">sqrt(x)</td><td style="text-align:left">x 的方根</td></tr><tr><td style="text-align:left">算术</td><td style="text-align:left">srand(x)</td><td style="text-align:left">x 是 rand() 的新的随机数种子</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">gsub(r,s)</td><td style="text-align:left">将 $0 中所有出现的 r 替换为 s, 返回替换发生的次数.</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">gsub(r,s,t )</td><td style="text-align:left">将字符串 t 中所有出现的 r 替换为 s, 返回替换发生的次数</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">index(s,t)</td><td style="text-align:left">返回字符串 t 在 s 中第一次出现的位置, 如果 t 没有出现的话, 返回 0.</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">length(s)</td><td style="text-align:left">返回 s 包含的字符个数</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">match(s,r)</td><td style="text-align:left">测试 s 是否包含能被 r 匹配的子串, 返回子串的起始位置或 0; 设置 RSTART 与 RLENGTH</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">split(s,a)</td><td style="text-align:left">用 FS 将 s 分割到数组 a 中, 返回字段的个数</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">split(s,a,fs)</td><td style="text-align:left">用 fs 分割 s 到数组 a 中, 返回字段的个数</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">sprintf(fmt,expr-list)</td><td style="text-align:left">根据格式字符串 fmt 返回格式化后的 expr-list</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">sub(r,s)</td><td style="text-align:left">将 $0 的最左最长的, 能被 r 匹配的子字符串替换为 s, 返回替换发生的次数.</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">sub(r,s,t)</td><td style="text-align:left">把 t 的最左最长的, 能被 r 匹配的子字符串替换为 s, 返回替换发生的次数.</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">substr(s,p)</td><td style="text-align:left">返回 s 中从位置 p 开始的后缀.</td></tr><tr><td style="text-align:left">字符串</td><td style="text-align:left">substr(s,p,n)</td><td style="text-align:left">返回 s 中从位置 p 开始的, 长度为 n 的子字符串.</td></tr></tbody></table><h4 id="空语句">空语句</h4><p>单独一个分号表示一个空语句. 在下面这个程序里, for 的循环体是一个空语句.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BEGIN &#123; FS = &quot;\t&quot; &#125;</span><br><span class="line">&#123; </span><br><span class="line">  for (i = 1; i &lt;= NF &amp;&amp; $i != &quot;&quot;; i++)</span><br><span class="line">  ;</span><br><span class="line">  if (i &lt;= NF)</span><br><span class="line">  print</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个程序打印所有的, 包含空字段的行。</p><h3 id="流程控制">流程控制</h3><p>Awk 提供花括号用于语句组合, if-else 用于决策, while, for, do 语句用于循环, 所有这些都来源于 C 语言.<br>一条单独的语句总是可以被替换为一个被花括号包围起来的语句列表, 列表中的语句用换行符或分号分开, 换行符可以出现在任何左花括号之后, 也可以出现在任何右花括号之前.</p><h4 id="if-else">if-else</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># if-else 具有形式:</span></span><br><span class="line"><span class="keyword">if</span> (expression)</span><br><span class="line">statements1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">statements2</span><br></pre></td></tr></table></figure><p>else statements2 是可选的. 右括号, statements1, 和关键词 else 后面的换行符是可选的.如果 else 与 statements1 出现在同一行, 并且 statements1 是一条单独的语句, 那么在 statements1 的末尾必须使用分号来终止语句.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (e) s=1; else s=2</span><br></pre></td></tr></table></figure><h4 id="while">while</h4><p>当条件为真时, while 就会重复执行语句。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">while (expression)</span><br><span class="line">  statements</span><br></pre></td></tr></table></figure><p>例如:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  i = <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> (i &lt;= NF) &#123;</span><br><span class="line">    print <span class="variable">$i</span></span><br><span class="line">    i++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="for">for</h4><p>for 语句是 while 的更加一般的形式:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for (expression1;expression2;expression3)</span><br><span class="line">  statements</span><br></pre></td></tr></table></figure><p>例如:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  for (i = 1; i &lt;= NF; i++)</span><br><span class="line">    print $i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="do-while">do-while</h4><p>do 语句具有形式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do</span><br><span class="line">  statements</span><br><span class="line">while (expression)</span><br></pre></td></tr></table></figure><h4 id="其他">其他</h4><p>有两种语句可以影响循环的运行: break 和 continue.</p><ul><li>break 会导致控制流马上从包围着它的循环内退出, 循环可以是 while, for , 或 do.</li><li>continue 导致下一次迭代开始; 它使得执行流马上进入 while 与 do 的测试表达式, 或 for 的 expression3.</li></ul><p>next 与 exit 控制用于读取输入行的外层循环.</p><ul><li>next 使 awk 抓取下一个输入行, 然后从第一个 模式–动作 语句开始匹配模式.</li><li>在 END 动作里, exit 会导致程序终止, 在其他动作里,exit 会使得程序表现得就好像所有输入都读完了; 不再有输入会被读取, 并执行 END 动作 (如果有 END 的话)。如果 exit 语句包含一个表达式，awk 将 expression 的值作为程序的退出状态返回。</li></ul><h3 id="自定义函数">自定义函数</h3><p>除了内建函数, awk 还可以包含用户定义的函数. 定义函数的语句具有形式:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function name(parameter-list) &#123;</span><br><span class="line">statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一个函数定义可以出现在任何 模式–动作 语句可以出现的地方. 于是, awk 程序的通常形式就变成了一系列的, 由换行符或分号分开的 模式–动作 语句与函数定义.</p><p>函数体可能包含一个 return 语句, 用于将程序执行流返回至调用函数 (返回的时候可以带<br>有一个值). 它具有形式<code>return expression</code>。例如:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function max(m, n) &#123;</span><br><span class="line">  return m &gt; n ? m : n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用户定义的函数可以在任何 模式–动作 语句的任何表达式中使用, 也可以在出现在任何函数体内. 每一个对函数的使用都叫做一个 调用 (call). 如果一个用户定义的函数在函数体内调用了它自身, 我们就说这个函数是 递归 (recursive) 的。</p><p>max 函数可以像这样调用:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; print max($1, max($2, $3)) &#125; </span><br><span class="line">function max(m, n) &#123;</span><br><span class="line">  return m &gt; n ? m : n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>调用函数时, 函数名与左括号之间不能留有空白.</p></blockquote><p>一个带有参数 $1 的函数被调用时 ($1 只是一个普通的变量), 函数接收到的参数是变量的值的一份拷贝, 所以函数操作的是变量的拷贝, 而不是变量本身. 这意味着函数不会对函数体外部的变量的值产生影响. (用行话来说, 这样的变量叫做 “标量”, “按值传递” 给函数) 。</p><p>然而, 当数组作为函数的参数时, 函数接收到的参数就不是数组的拷贝, 所以函数可以改变数组元素, 或往数组增添新的值 (这叫作 “按引用传递”).</p><p>在函数体内部, 参数是局部变量 — 它们只在函数执行时才存在, 而且它们与程序中其他同名的变量没有任何关联. 但是, 其他所有的变量都是全局的，如果函数体内的某个变量没有出现在参数列表中, 那么整个程序范围内都可以访问该变量.</p><h3 id="输入-输出">输入&amp;输出</h3><p>awk通常的输入源是文件和管道输出。awk输入设置如下:</p><ul><li>awk使用输入分隔符FS区分字段(默认空格)，把一个字符串赋值给内建变量 FS 就可以改变字段分隔符. 如果字符串的长度多于一个字符, 那么它会被当成一个正则表达式.</li><li>awk使用记录分隔符RS来区分记录(默认换行符),如果 RS 被设置成空值，那么记录之间将由一个或多个的空行来分隔, 并且每个记录可以占据多行.当记录由多行组成时, 无论 FS 是什么值, 换行符总是字段分隔符之一.</li></ul><p>函数 getline 可以从当前输入行, 或文件, 或管道, 读取输入. getline 抓取下一个记录,按照通常的方式把记录分割成一个个的字段. 它会设置 NF, NR, 和 FNR; 如果存在一个记录, 返回1, 若遇到文件末尾, 返回 0, 发生错误时返回 -1 (例如打开文件失败).</p><ul><li>表达式 getline x 读取下一条记录到变量 x 中, 并递增 NR 与 FNR, 不会对记录进行分割,所以不会设置 NF。</li><li>表达式 <code>getline &lt;&quot;file&quot;</code> 从文件 file 读取输入. 它不会对 NR 与 FNR 产生影响, 但是会执行字段分割, 并且设置 NF.</li><li>表达式 <code>getline x &lt;&quot;file&quot;</code> 从 file 读取下一条记录, 存到变量 x 中. 记录不会被分割成字段, 变量 NF, NR, 与 FNR 都不会被修改.</li></ul><table><thead><tr><th style="text-align:left">表达式</th><th style="text-align:left">被设置的变量</th></tr></thead><tbody><tr><td style="text-align:left">getline</td><td style="text-align:left">$0, NF, NR, FNR</td></tr><tr><td style="text-align:left">getline var</td><td style="text-align:left">var, NR, FNR</td></tr><tr><td style="text-align:left">getline &lt;file</td><td style="text-align:left">$0, NF</td></tr><tr><td style="text-align:left">getline var &lt;file</td><td style="text-align:left">var</td></tr><tr><td style="text-align:left">cmd | getline</td><td style="text-align:left">$0, NF</td></tr><tr><td style="text-align:left">cmd | getline var</td><td style="text-align:left">var</td></tr></tbody></table><p>print 与 printf（和C语言的Printf一致） 语句可以用来产生输出. print 用于产生简单的输出; printf 用于产<br>生格式化的输出. 来自 print 与 printf 的输出可以被重定向到文件, 管道与终端.</p><p>语句 close(expression) 关闭一个文件或管道, 文件或管道由 expression 指定; expression 的字符串值必须与最初用于创建文件或管道的字符串值相同. 例如:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">printf(&quot;%15s\t%6d\n&quot;, c, pop[c]) | &quot;sort -t&#x27;\t&#x27; +1rn&quot;</span><br><span class="line">close(&quot;sort -t&#x27;\t&#x27; +1rn&quot;)</span><br></pre></td></tr></table></figure><p>关闭上面打开的排序管道.在同一个程序中, 如果你写了一个文件, 而待会儿想要读取它, 那么就需要调用 close. 某一时刻, 同时处于打开状态的文件或管道数量最大值由实现定义.</p><h2 id="参考">参考</h2><ul><li>[1] <a target="_blank" rel="noopener" href="https://github.com/wuzhouhui/awk">AWK程序设计语言</a></li><li>[2] <a target="_blank" rel="noopener" href="https://www.gnu.org/software/gawk/manual/gawk.htm">gun.gawk</a></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/3a1678d4/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/3a1678d4/" class="post-title-link" itemprop="url">linux命令top</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-17 13:57:22" itemprop="dateCreated datePublished" datetime="2016-12-17T13:57:22+08:00">2016-12-17</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-11-23 14:47:36" itemprop="dateModified" datetime="2023-11-23T14:47:36+08:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/3a1678d4/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/3a1678d4/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/3a1678d4/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>linux命令top</h1><p>top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，top命令提供了实时的对系统处理器的状态监视.它将显示系统中CPU最“敏感”的任务列表.该命令可以按CPU使用.内存使用和执行时间对任务进行排序。</p><div class="post-button"><a class="btn" href="/posts/3a1678d4/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/85f7767b/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/85f7767b/" class="post-title-link" itemprop="url">linux命令tumx</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-16 13:54:00" itemprop="dateCreated datePublished" datetime="2016-12-16T13:54:00+08:00">2016-12-16</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-11-23 14:47:33" itemprop="dateModified" datetime="2023-11-23T14:47:33+08:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/85f7767b/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/85f7767b/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/85f7767b/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>20k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>33 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>linux命令tumx</h1><p>命令行的典型使用方式是，打开一个终端窗口（terminal window，以下简称&quot;窗口&quot;），在里面输入命令。用户与计算机的这种临时的交互，称为一次&quot;会话&quot;（session） 。</p><p>会话的一个重要特点是，窗口与其中启动的进程是连在一起的。打开窗口，会话开始；关闭窗口，会话结束，会话内部的进程也会随之终止，不管有没有运行完。</p><p>一个典型的例子就是，SSH 登录远程计算机，打开一个远程窗口执行命令。这时，网络突然断线，再次登录的时候，是找不回上一次执行的命令的。因为上一次 SSH 会话已经终止了，里面的进程也随之消失了。</p><p>为了解决这个问题，会话与窗口可以&quot;解绑&quot;：窗口关闭时，会话并不终止，而是继续运行，等到以后需要的时候，再让会话&quot;绑定&quot;其他窗口。</p><div class="post-button"><a class="btn" href="/posts/85f7767b/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/d177193b/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/d177193b/" class="post-title-link" itemprop="url">linux命令free</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-16 09:50:42" itemprop="dateCreated datePublished" datetime="2016-12-16T09:50:42+08:00">2016-12-16</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-11-23 14:47:29" itemprop="dateModified" datetime="2023-11-23T14:47:29+08:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/d177193b/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/d177193b/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/d177193b/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>linux命令free</h1><p>free 命令是一个显示系统中空闲和已用内存大小的工具。free 命令的输出和 top 命令相似。大多数Linux发行版已经含有 free 命令。</p><div class="post-button"><a class="btn" href="/posts/d177193b/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/e1780f8f/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/e1780f8f/" class="post-title-link" itemprop="url">linux命令Tee</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-15 09:50:42" itemprop="dateCreated datePublished" datetime="2016-12-15T09:50:42+08:00">2016-12-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-11-23 14:47:24" itemprop="dateModified" datetime="2023-11-23T14:47:24+08:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/e1780f8f/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/e1780f8f/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/e1780f8f/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>linux命令Tee</h1><p>Linux tee命令用于读取标准输入的数据，并将其内容输出成文件。</p><div class="post-button"><a class="btn" href="/posts/e1780f8f/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/ab7d6f7c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/ab7d6f7c/" class="post-title-link" itemprop="url">linux命令sed</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-15 09:50:42" itemprop="dateCreated datePublished" datetime="2016-12-15T09:50:42+08:00">2016-12-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-11-23 14:48:27" itemprop="dateModified" datetime="2023-11-23T14:48:27+08:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/ab7d6f7c/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/ab7d6f7c/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/ab7d6f7c/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>18k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>29 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>linux命令sed</h1><p>sed 是linux 中的流式编辑器，用于过滤和修改文本。sed 会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下：</p><ol><li>每次仅读取一行内容；</li><li>根据提供的规则命令匹配并修改数据。注意，sed 默认不会直接修改源文件数据，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据；</li><li>将执行结果输出。</li><li>当一行数据匹配完成后，它会继续读取下一行数据，并重复这个过程，直到将文件中所有数据处理完毕。</li></ol><div class="post-button"><a class="btn" href="/posts/ab7d6f7c/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/555b2ed6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/555b2ed6/" class="post-title-link" itemprop="url">Java quickstart</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-15 00:28:16" itemprop="dateCreated datePublished" datetime="2016-12-15T00:28:16+08:00">2016-12-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-02-04 11:29:17" itemprop="dateModified" datetime="2024-02-04T11:29:17+08:00">2024-02-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/Basic/" itemprop="url" rel="index"><span itemprop="name">Basic</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/555b2ed6/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/555b2ed6/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/555b2ed6/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>22k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>37 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>java quickstart</h1><p>在开始学习java语言之前,先了解Java的一些特性:</p><ul><li>简单：语言简单，方便掌握语言特性，快速展开工作。</li><li>面向对象： 面向对象的编程模型。</li><li>分布式：支持分布式网络环境运行。</li><li>健壮：java的目的是创建可靠的软件，提供了编译时检查，运行时检查。通过GC简化开发自己对内存的管理。</li><li>安全：通过在语言和运行时系统中设计的安全功能，Java技术使您可以构建无法从外部入侵的应用程序。</li><li>体系结构中立，可移植：Java技术旨在支持将部署到异构网络环境中的应用程序。在这样的环境中，应用程序必须能够在各种硬件体系结构上执行。字节码是一种中立的体系结构，是将代码有效地传输到多个硬件和软件平台的中间格式。此外Java通过严格定义基本语言，将可移植性进一步提高了。</li><li>解释型：解释和运行系统已经被移植在任何机器上，Java解释器可以直接执行Java字节码。</li><li>高性能：Java解释器可以全速运行而无需检查运行时环境，从而实现了卓越的性能。自动垃圾收集器运行作为一个低优先级后台线程，确保大概率下的更好的性能和内存可用。</li><li>多线程：Java多线程功能提供了构建具有许多并发活动线程的应用程序的方法。因此，多线程为最终用户带来了高度的交互性。Java平台通过添加复杂的同步原语来支持语言级别的多线程：语言库提供了 Thread类，运行时系统提供了监视和条件锁定原语。此外还有高层级的库api提供同步功能</li><li>动态：Java编译器在编译时静态检查方面非常严格，而语言和运行时系统在其链接阶段是 动态的。类仅在需要时链接。新的代码模块可以按需链接到各种来源，甚至可以来自网络上的各种来源。</li></ul><blockquote><p>James Gosling和Henry McGilton撰写的白皮书 <a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/language-environment.html">The Java Language Environment</a>中解释了上述每个流行词 。</p></blockquote><p>Java开发过程:</p><ol><li>首先将所有源代码编写为以.java扩展名结尾的纯文本文件。</li><li>然后，将这些源文件由javac编译器编译为.class文件。</li><li>.class文件中是Java虚拟机的机器语言(字节码)。然后，Java虚拟机实例运行java应用程序。</li></ol><blockquote><p>Java平台包含两个组件：Java虚拟机和Java应用程序编程接口（API）.虚拟机用于执行java程序，sdk 提供了系统库和部分高级API库。</p></blockquote><div class="post-button"><a class="btn" href="/posts/555b2ed6/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/79ea612a/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/79ea612a/" class="post-title-link" itemprop="url">shell命令集合</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-14 19:50:42" itemprop="dateCreated datePublished" datetime="2016-12-14T19:50:42+08:00">2016-12-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-02-20 20:27:53" itemprop="dateModified" datetime="2024-02-20T20:27:53+08:00">2024-02-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/79ea612a/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/79ea612a/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/79ea612a/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>8 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>shell命令集合</h1><p>收集了一些工作中常用的shell命令的使用</p><h2 id="MACOS-使用-GNU-工具">MACOS 使用 GNU 工具</h2><p>Mac OS X自带的sed等命令行工具是基于BSD的，有一些缺陷和不足，可以安装gnu命令行工具来替代Mac自带的这些常用工具。</p><h3 id="preinstall">preinstall</h3><p>在安装GNU工具前，确保mac 已安装 <a target="_blank" rel="noopener" href="https://brew.sh/">HomeBrew</a>，安装方法见链接。</p><h3 id="install">install</h3><ol><li>首先安装最重要的－－GNU Coreutils</li></ol><p>GNU Coreutils包含了UNIX最基本的命令，如ls，cat等。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install coreutils</span></span><br></pre></td></tr></table></figure><p>为了使用默认工具名字，例如使用 ls 而不是 gls 来执行ls命令。需要在bashrc或zshrc配置文件中加上下面这段配置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if brew list --formula | grep coreutils &gt; /dev/null ; then</span><br><span class="line">  export PATH=&quot;$(brew --prefix coreutils)/libexec/gnubin:$PATH&quot;</span><br><span class="line">  export MANPATH=&quot;$(brew --prefix coreutils)/libexec/gnuman:$MANPATH&quot;</span><br><span class="line">  # GNU ls 设置</span><br><span class="line">  alias ls=&#x27;ls -F --show-control-chars --color=auto&#x27;</span><br><span class="line">  # 设置ls命令使用的环境变量LS_COLORS</span><br><span class="line">  eval `gdircolors -b $HOME/.dir_colors`</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><ol start="2"><li>其他命令</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">brew install binutils</span><br><span class="line">export PATH=&quot;/usr/local/opt/binutils/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install ed </span><br><span class="line">export PATH=&quot;/usr/local/opt/ed/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install findutils </span><br><span class="line">export PATH=&quot;/usr/local/opt/findutils/libexec/gnubin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install gawk</span><br><span class="line">brew install gnu-indent </span><br><span class="line">export PATH=&quot;/usr/local/opt/gnu-indent/libexec/gnubin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install gnu-sed </span><br><span class="line">export PATH=&quot;/usr/local/opt/gnu-sed/libexec/gnubin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install gnu-tar </span><br><span class="line">export PATH=&quot;/usr/local/opt/gnu-tar/libexec/gnubin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install gnu-which</span><br><span class="line">export PATH=&quot;/usr/local/opt/gnu-which/libexec/gnubin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install grep </span><br><span class="line">export PATH=&quot;/usr/local/opt/grep/libexec/gnubin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">brew install gnutls</span><br><span class="line">brew install gzip</span><br><span class="line">brew install screen</span><br><span class="line">brew install watch</span><br><span class="line">brew install wdiff</span><br><span class="line">brew install wget</span><br></pre></td></tr></table></figure><h2 id="帮助命令">帮助命令</h2><h3 id="man">man</h3><p>Linux man中的man就是manual的缩写，用来查看系统中自带的各种参考手册，但是手册页分为好几个部分，如下所示：</p><ul><li>1 Executable programs or shell commands</li><li>2 System calls (functions provided by the kernel)</li><li>3 Library calls (functions within program libraries)</li><li>4 Special files (usually found in /dev)</li><li>5 File formats and conventions eg /etc/passwd</li><li>6 Games</li><li>7 Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7)</li><li>8 System administration commands (usually only for root)</li><li>9 Kernel routines [Non standard]</li></ul><p>在shell中输入man+数字+命令/函数即可以查到相关的命令和函数。若不加数字，那Linux man命令默认从数字较小的手册中寻找相关命令和函数。<br>例如：我们输入man ls，它会在最左上角显示<code>LS(1)</code>，在这里，<code>LS</code>表示手册名称，而<code>(1)</code>表示该手册位于第一节章，同样，我们输入<code>man ifconfig</code>它会在最左上角显示<code>IFCONFIG(8)</code>。man是按照手册的章节号的顺序进行搜索的，比如：man sleep，只会显示sleep命令的手册,如果想查看库函数sleep，就要输入：man 3 sleep</p><h3 id="whatis">whatis</h3><p>可以使用whatis命令是用于查询一个命令执行什么功能，并将查询结果打印到终端上。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs-server ~]<span class="comment">#whatis cd</span></span><br><span class="line"><span class="built_in">cd</span> (1p) - change the working directory</span><br><span class="line"><span class="built_in">cd</span> [builtins] (1) - bash built-in commands, see bash(1)</span><br><span class="line"><span class="comment">#从上文的输出结果我们看到cd命令是bash的内建命令，它的功能是改变当前目录，可以在1和1p的章节中查看它的帮助。</span></span><br><span class="line">$ man 1 <span class="built_in">cd</span></span><br><span class="line">$ man 1p <span class="built_in">cd</span></span><br></pre></td></tr></table></figure><h3 id="tldr">tldr</h3><p><a target="_blank" rel="noopener" href="https://github.com/tldr-pages/tldr">tldr项目地址</a></p><p><code>tldr=Too Long; Didn't Read</code>，它简化了烦琐的man指令帮助文档，仅列出常用的该指令的使用方法。相比较man给出完整的帮助文档而言，大多数情况下，给出几个指令的使用demo可能正是我们想要的。tldr会在本地存储文档库，所以需要安装到本地。有多种客户端，例如python，node。mac用户可以直接用<code>brew install tldr</code>安装。</p><p>使用方法: <code>tldr [command]</code>,例如 <code>tldr tar</code></p><p>除了TLDR，相似的命令还有<a target="_blank" rel="noopener" href="https://github.com/cheat/cheat">cheat</a>和<a target="_blank" rel="noopener" href="https://github.com/srsudar/eg">eg</a></p><h3 id="cht-sh"><a target="_blank" rel="noopener" href="http://cht.sh">cht.sh</a></h3><p><a target="_blank" rel="noopener" href="http://cht.sh/">cht.sh</a>是在线版的TLDR+Cheat，此外，还支持了多种编程语言。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装cht.sh 客户端脚本</span></span><br><span class="line">PATH_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/bin&quot;</span>  <span class="comment"># or another directory on your $PATH</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$PATH_DIR</span>&quot;</span></span><br><span class="line">curl https://cht.sh/:cht.sh &gt; <span class="string">&quot;<span class="variable">$PATH_DIR</span>/cht.sh&quot;</span></span><br><span class="line"><span class="built_in">chmod</span> +x <span class="string">&quot;<span class="variable">$PATH_DIR</span>/cht.sh&quot;</span></span><br></pre></td></tr></table></figure><p>使用例子:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令</span></span><br><span class="line">$ cht.sh tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编程语言</span></span><br><span class="line">$ cht.sh go reverse a list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互式启动</span></span><br><span class="line">$ cht.sh --shell</span><br><span class="line">cht.sh&gt; go reverse a list</span><br></pre></td></tr></table></figure><h2 id="常用命令">常用命令</h2><ul><li><a href="/posts/ab7d6f7c/">linux命令-sed</a></li><li><a href="/posts/85f7767b/">linux命令-tmux</a></li><li><a href="/posts/3a1678d4/">linux命令-top</a></li><li><a href="/posts/5c947520/">linux命令-awk</a></li><li><a href="/posts/e1780f8f/">linux命令-tee</a></li><li><a href="/posts/d177193b/">linux命令-free</a></li></ul><h2 id="工具">工具</h2><h3 id="Polysh">Polysh</h3><p><a target="_blank" rel="noopener" href="http://guichaz.free.fr/polysh/">Polysh</a> 是一个交互式命令，可以在一台服务器上批量的对一批服务器进行处理，运行交互式命令。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://guichaz.free.fr/polysh/files/polysh-0.4.tar.gz</span><br><span class="line">tar -zxvf polysh-0.4.tar.gz </span><br></pre></td></tr></table></figure><p>新版维护在github上<a target="_blank" rel="noopener" href="https://github.com/innogames/polysh">https://github.com/innogames/polysh</a></p><h3 id="Id">Id</h3><p>id命令用于显示用户的ID，以及所属群组的ID。id会显示用户以及所属群组的实际与有效ID。若两个ID相同，则仅显示实际ID。若仅指定用户名称，则显示目前用户的ID。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示当前用户  ID (UID), group ID (GID) and groups</span></span><br><span class="line">$ <span class="built_in">id</span></span><br><span class="line"><span class="comment"># 显示指定用户  ID (UID), group ID (GID) and groups</span></span><br><span class="line">$ <span class="built_in">id</span> username</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示当前UID</span></span><br><span class="line">$ <span class="built_in">id</span> -u</span><br><span class="line"><span class="comment"># 显示当前用户名</span></span><br><span class="line">$ <span class="built_in">id</span> -u -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示当前 GID</span></span><br><span class="line">$ <span class="built_in">id</span> -g</span><br><span class="line"><span class="comment"># 显示当前 group名</span></span><br><span class="line">$ <span class="built_in">id</span> -g -n</span><br></pre></td></tr></table></figure><h3 id="numfmt">numfmt</h3><p>numfmt用于数字和可阅读的形式的相互转换。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">数字转可读形式</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1k = 1000</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">numfmt</span> --to=si 1000</span> </span><br><span class="line">1.0K</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1k = 1024</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">numfmt</span> --to=iec 2048</span></span><br><span class="line">2.0K</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可读形式转数字</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">numfmt</span> --from=si 1K</span></span><br><span class="line">1000</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">numfmt</span> --from=iec 1K</span></span><br><span class="line">1024</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1024K转换可预读形式</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">numfmt</span>  --from-unit K  --to=iec 1024</span></span><br><span class="line">1.0M</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">numfmt</span> --from=iec --to-unit=K 1M</span></span><br><span class="line">1024</span><br></pre></td></tr></table></figure><h3 id="thefuck">thefuck</h3><p>ubuntu安装：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install python3-dev python3-pip python3-setuptools</span><br><span class="line">pip3 install thefuck --user</span><br><span class="line"><span class="comment"># edit .zshrc, 添加环境变量 export PATH=&quot;$PATH:~/.local/bin/&quot;</span></span><br></pre></td></tr></table></figure><p>macos安装：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install thefuck</span><br><span class="line"><span class="comment"># edit .zshrc, 添加环境变量 export PATH=&quot;$PATH:~/.local/bin/&quot;</span></span><br></pre></td></tr></table></figure><h3 id="trash-cli">trash-cli</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ubuntu</span></span><br><span class="line">sudo apt install trash-cli</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">macos</span> </span><br><span class="line">brew install trash-cli</span><br></pre></td></tr></table></figure><p>给 rm 设置一个别名来不使用它</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias rm=&#x27;trash-put&#x27;</span><br></pre></td></tr></table></figure><p>如果你真的要用 rm，那就在 rm 前加上斜杠来取消别名：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\rm file-without-hope</span><br></pre></td></tr></table></figure><h2 id="sdk-manager">sdk manager</h2><p>sdk manager，一般都支持安装，删除，切换sdk。</p><h3 id="pyenv">pyenv</h3><p>python sdk manager。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ubuntu</span></span><br><span class="line">curl https://pyenv.run | bash</span><br><span class="line"><span class="comment"># macos</span></span><br><span class="line">brew install pyenv</span><br></pre></td></tr></table></figure><p>修改<code>.zshrc</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PYENV_ROOT=<span class="string">&quot;<span class="variable">$HOME</span>/.pyenv&quot;</span></span><br><span class="line">[[ -d <span class="variable">$PYENV_ROOT</span>/bin ]] &amp;&amp; <span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PYENV_ROOT</span>/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(pyenv init -)</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="sdkman">sdkman</h3><p>java，scala 系列的sdk manager。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s <span class="string">&quot;https://get.sdkman.io&quot;</span> | bash</span><br></pre></td></tr></table></figure><p>修改<code>.zshrc</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#THIS MUST BE AT THE END OF THE FILE FOR SDKMAN TO WORK!!!</span></span><br><span class="line"><span class="built_in">export</span> SDKMAN_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.sdkman&quot;</span></span><br><span class="line">[[ -s <span class="string">&quot;<span class="variable">$HOME</span>/.sdkman/bin/sdkman-init.sh&quot;</span> ]] &amp;&amp; <span class="built_in">source</span> <span class="string">&quot;<span class="variable">$HOME</span>/.sdkman/bin/sdkman-init.sh&quot;</span></span><br></pre></td></tr></table></figure><h3 id="nvm">nvm</h3><p>node sdk manager。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ubuntu</span></span><br><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash</span><br><span class="line"><span class="comment"># macos</span></span><br><span class="line">brew install nvm</span><br></pre></td></tr></table></figure><p>修改<code>.zshrc</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;/usr/local/opt/nvm/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;/usr/local/opt/nvm/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">&quot;/usr/local/opt/nvm/etc/bash_completion.d/nvm&quot;</span> ] &amp;&amp; \. <span class="string">&quot;/usr/local/opt/nvm/etc/bash_completion.d/nvm&quot;</span>  <span class="comment"># This loads nvm bash_completion</span></span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/daa4c03f/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/daa4c03f/" class="post-title-link" itemprop="url">综合能力-思考模式</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-14 19:50:42" itemprop="dateCreated datePublished" datetime="2016-12-14T19:50:42+08:00">2016-12-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-02-18 16:07:31" itemprop="dateModified" datetime="2024-02-18T16:07:31+08:00">2024-02-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF/" itemprop="url" rel="index"><span itemprop="name">个人成长</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/daa4c03f/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/daa4c03f/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/daa4c03f/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>综合能力</h1><p>收集了一些逻辑思维原则和模式。</p><div class="post-button"><a class="btn" href="/posts/daa4c03f/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.victorchu.info/posts/aa450f3f/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/victor-blog-head.webp"><meta itemprop="name" content="Victor Chu"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="代码之旅"><meta itemprop="description" content="blog about programming."></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="undefined | 代码之旅"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/aa450f3f/" class="post-title-link" itemprop="url">ubuntu tweak</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-12-13 22:17:32" itemprop="dateCreated datePublished" datetime="2016-12-13T22:17:32+08:00">2016-12-13</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-11-23 15:15:29" itemprop="dateModified" datetime="2023-11-23T15:15:29+08:00">2023-11-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Ubuntu/" itemprop="url" rel="index"><span itemprop="name">Ubuntu</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Waline：</span> <a title="waline" href="/posts/aa450f3f/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/posts/aa450f3f/" itemprop="commentCount"></span> </a></span><span class="post-meta-item" title="阅读次数"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="waline-pageview-count" data-path="/posts/aa450f3f/"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>7 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1>ubuntu tweak</h1><p>ubuntu 日常开发机的调整记录</p><div class="post-button"><a class="btn" href="/posts/aa450f3f/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/18/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/20/"><i class="fa fa-angle-right"></i></a></nav></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">浙ICP备18037908号-1 </a><img src="/images/gongan_icon.webp" alt=""><a href="https://beian.mps.gov.cn/#/query/webSearch?code=33010902002043" rel="noopener" target="_blank">浙公网安备 33010902002043号</a></div><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Victor Chu</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">1.7m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">45:51</span></span></div><div class="powered-by">由<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" class="theme-link" rel="noopener" target="_blank"><img src="/images/upyun_logo.webp" width="50" style="display:inline"></a>提供CDN服务</div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.23.3/algoliasearch-lite.umd.js" integrity="sha256-1QNshz86RqXe/qsCBldsUu13eAX6n/O98uubKQs87UI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.67.0/instantsearch.production.min.js" integrity="sha256-TW7D3X/i/W+RUgEeDppEnFT2ixv5lzplKH0c58D92dY=" crossorigin="anonymous"></script><script src="/js/third-party/search/algolia-search.js"></script><script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":"default","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script><script src="/js/third-party/tags/mermaid.js"></script><script src="/js/third-party/fancybox.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha256-UF1fgpAiu3tPJN/uCqEUHNe7pnr+QR0SQDNfgglgtcM=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"walineui.victorchu.info","cssUrl":"https://cdn.staticfile.org/waline/2.15.8/waline.css","commentCount":true,"pageview":true,"requiredMeta":["nick","mail"],"login":"force","libUrl":"https://cdn.staticfile.org/waline/2.15.8/waline.js","el":"#waline","comment":true,"path":"/page/19/"}</script><link rel="stylesheet" href="https://cdn.staticfile.org/waline/2.15.8/waline.css"><script>document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});</script></body></html>